id: yukon_migrate_blog
label: Yukon Migrate Blog Nodes
migration_tags:
    - Drupal 7
    - Content
    - Blog
migration_group: legacy
source:
    plugin: d7_node
    node_type: blog
    constants:
        default_text_format: full_html
destination:
    plugin: entity:node
process:
    uid:
        plugin: yukon_author
    status:
        plugin: skip_on_value
        method: row
        not_equals: true
        value: 1
        source: status
    langcode: language
    created: created
    changed: changed
    promote: promote
    sticky: sticky
    revision_log: log
    type:
        plugin: default_value
        default_value: blog
    title: title
    metatags/0/description: field_page_description/0/value
    field_meta_tags:
        -
            plugin: skip_on_empty
            source: '@metatags'
            method: process
        -
            plugin: callback
            callable: serialize
            source: '@metatags'
    body/value: body/0/value
    body/summary: body/0/summary
    body/format: constants/default_text_format
    field_contact/value: field_contact/0/value
    field_contact/format: constants/default_text_format
    field_icon_dark:
        plugin: yukon_imagemedia
    field_featured_image:
        plugin: yukon_imagemedia
    field_blog_type:
        plugin: migration_lookup
        migration: yukon_migrate_blog_type
        source: field_blog_type
        no_stub: true
    field_category_term:
        plugin: migration_lookup
        migration: yukon_migrate_category
        source: field_category_term
        no_stub: true
    field_subcategory:
        plugin: migration_lookup
        migration: yukon_migrate_subcategory
        source: field_subcategory_term
        no_stub: true
    field_department_term:
        plugin: migration_lookup
        migration: yukon_migrate_department
        source: field_department_term
        no_stub: true
    field_yukon_editorial_team:
        plugin: migration_lookup
        migration: yukon_migrate_teams
        source: field_yukon_editorial_team
        no_stub: true
    field_social_sharing: field_social_sharing
migration_dependencies:
    optional:
        - yukon_migrate_department
        - yukon_migrate_teams
        - yukon_migrate_blog_type
        - yukon_migrate_category
        - yukon_migrate_subcategory
